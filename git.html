<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600553 (zh-CN, DDL); Windows/6.1.1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="390"/>

<div>
<span><div><font style="font-size: 11pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 11pt; font-weight: bold;-evernote-highlight:true;">初始化git</span></font></div><div><span style="font-size: 11pt;">    git init</span></div><div><span style="font-size: 11pt;">    git config --global user.name &quot;&quot;</span></div><div><span style="font-size: 11pt;">    git config --global user.email &quot;&quot;</span></div><div><span style="font-size: 11pt;">    git config --list</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><span style="font-size: 11pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">基本命令</span></font></div><div><span style="font-size: 11pt;">    git add 文件名                工作区 -&gt; 暂存区</span></div><div><span style="font-size: 11pt;">    git commit -m '描述'      暂存区 -&gt; git仓库</span></div><div><span style="font-size: 11pt;">    git status   <span>    </span><span>    </span><span>    </span><span>    </span><span>     </span>查看状态</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    注：修改了就要重新add commit</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><span style="font-size: 11pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">版本问题</span></font></div><div><span style="font-size: 11pt;">    git diff                     <span>    </span><span>  <span>    </span>    </span>查看上次修改</span></div><div><span style="font-size: 11pt;">    git log                      <span>    </span><span>     <span>    </span></span>查看所有版本（详细）</span></div><div><span style="font-size: 11pt;">    git log --pretty=oneline       查看所有版本</span></div><div><span style="font-size: 11pt;">    git reset --hard HEAD^        返回到上一个版本</span></div><div><span style="font-size: 11pt;">    git reset --hard 版本号id    <span>   </span>返回到指定版本</span></div><div><span style="font-size: 11pt;">    git reflog                   <span>    </span><span>    </span><span>    </span>查看历史命令</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><span style="font-size: 11pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">撤销修改</span></font></div><div><span style="font-size: 11pt;">    git checkout --文件名        将当工作区的文件修改丢弃（还未add）</span></div><div><span style="font-size: 11pt;">    git reset HEAD 文件名        改错了工作区并提交到暂存区了（add了）要回退到工作区</span></div><div><span style="font-size: 11pt;">                        <span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>  </span> 在进行git checkout --文件名 操作</span></div><div><span style="font-size: 11pt;">    若已经提交到git库了，则需要版本回溯 返回上一版本或指定版本</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="font-size: 11pt; background-color: rgb(255, 250, 165); font-weight: bold;-evernote-highlight:true;">删除文件</span></span></font></div><div><span style="font-size: 11pt;">    先删除工作区的文件（工作区和版本区不一致）：rm 文件名</span></div><div><span style="font-size: 11pt;">        若想继续删除暂存区文件：1、git rm 文件名 2、git commit -m '信息' 提交</span></div><div><span style="font-size: 11pt;">        若想恢复工作区，将误删的文件恢复到最新版：git checkout -- 文件名</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    git checkout：其实是用版本库里的版本替换工作区的版本，无论工作区是修改还是删除</span></div><div><span style="font-size: 11pt;">              都可以“一键还原”</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><span style="font-size: 11pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">远程仓库</span></font></div><div><span style="font-size: 11pt;">    git remote -v             <span>    </span><span>    <span>    </span><span>    <span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span></span></span>仓库路径查询</span></div><div><span style="font-size: 11pt;">    git remote rm origin      <span>    <span>    </span><span>   <span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span> </span></span>删除指定远程</span></div><div><span style="font-size: 11pt;">    git remote add origin</span> <a href="mailto:git@github.com" style="font-size: 11pt;">git@github.com</a><span style="font-size: 11pt;">:zurh500/xxx.git   添加远程仓库</span></div><div><span style="font-size: 11pt;">    git push -u origin master  </span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    git pull origin master</span></div><div><span style="font-size: 11pt;">    git push -u -f origin master</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    git clone</span> <a href="mailto:git@github.com" style="font-size: 11pt;">git@github.com</a><span style="font-size: 11pt;">:zurh500/xxx.git   <span>    </span><span>    </span><span>    </span><span>    </span><span>    </span> 克隆远程仓库</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 11pt; font-weight: bold;-evernote-highlight:true;">创建与合并分支</span></font></div><div><span style="font-size: 11pt;">    git checkout -b dev        -b参数表示创建并切换dev分支</span></div><div><span style="font-size: 11pt;">    相当于以下两条命令</span></div><div><span style="font-size: 11pt;">    git branch dev</span></div><div><span style="font-size: 11pt;">    git checkout dev</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    git branch             <span>    </span><span>    </span><span>   <span>    </span><span>    </span> </span>查看当前分支</span></div><div><span style="font-size: 11pt;">    git branch &lt;name&gt;      <span>  <span>    </span>  <span>    </span></span>创建分支</span></div><div><span style="font-size: 11pt;">    git checkout &lt;name&gt;    <span>  <span>    </span>    </span>切换分支</span></div><div><span style="font-size: 11pt;">    git checkout -b &lt;name&gt; <span>    <span>   </span></span> 创建+切换分支</span></div><div><span style="font-size: 11pt;">    git merge &lt;name&gt;       <span>    <span>    </span><span>  </span></span> 合并某分支到当前分支</span></div><div><span style="font-size: 11pt;">    git branch -d &lt;name&gt;   <span>    <span>    </span><span>  </span></span>删除分支</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    步骤：</span></div><div><span style="font-size: 11pt;">    1.创建并且换分支</span></div><div><span style="font-size: 11pt;">    2.查看当前分支</span></div><div><span style="font-size: 11pt;">    3.创建新文件 add commit</span></div><div><span style="font-size: 11pt;">    4.切换到主分支</span></div><div><span style="font-size: 11pt;">    5.查看文件发现没有</span></div><div><span style="font-size: 11pt;">    6.合并某分支到当前分支</span></div><div><span style="font-size: 11pt;">    7.查看文件发现已经存在了</span></div><div><span style="font-size: 11pt;">    8.删除新创建的分支</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><span style="font-size: 11pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">解决冲突</span></font></div><div><span style="font-size: 11pt;">    当Git无法自动合并分支时，就必须首先解决冲突。解决冲突后，再提交，合并完成。</span></div><div><span style="font-size: 11pt;">    解决冲突就是把Git合并失败的文件手动编辑为我们希望的内容，再提交。</span></div><div><span style="font-size: 11pt;">    用git log --graph命令可以看到分支合并图</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    步骤</span></div><div><span style="font-size: 11pt;">    1.git merge 新建分支名 发现出现冲突</span></div><div><span style="font-size: 11pt;">    2.重新修改文件后add commit</span></div><div><span style="font-size: 11pt;">    3.使用git log --graph --pretty=oneline --abbrev-commit查看分支合并图</span></div><div><span style="font-size: 11pt;">    4.删除分支</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 11pt; font-weight: bold;-evernote-highlight:true;">分支管理策略</span></font></div><div><span style="font-size: 11pt;">    通常，合并分支时，如果可能，Git会用Fast forward模式，但这种模式下，删除分支后，会丢掉分支信息。</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    如果要强制禁用Fast forward模式，Git就会在merge时生成一个新的commit，这样，从分支历史上就可以看出分支信息。</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    下面我们实战一下--no-ff方式的git merge：</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    首先，仍然创建并切换dev分支：</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    $ git checkout -b dev</span></div><div><span style="font-size: 11pt;">    Switched to a new branch 'dev'</span></div><div><span style="font-size: 11pt;">    修改readme.txt文件，并提交一个新的commit：</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    $ git add readme.txt</span></div><div><span style="font-size: 11pt;">    $ git commit -m &quot;add merge&quot;</span></div><div><span style="font-size: 11pt;">    [dev f52c633] add merge</span></div><div><span style="font-size: 11pt;">     1 file changed, 1 insertion(+)</span></div><div><span style="font-size: 11pt;">    现在，我们切换回master：</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    $ git checkout master</span></div><div><span style="font-size: 11pt;">    Switched to branch 'master'</span></div><div><span style="font-size: 11pt;">    准备合并dev分支，请注意--no-ff参数，表示禁用Fast forward：</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    $ git merge --no-ff -m &quot;merge with no-ff&quot; dev</span></div><div><span style="font-size: 11pt;">    Merge made by the 'recursive' strategy.</span></div><div><span style="font-size: 11pt;">     readme.txt | 1 +</span></div><div><span style="font-size: 11pt;">     1 file changed, 1 insertion(+)</span></div><div><span style="font-size: 11pt;">    因为本次合并要创建一个新的commit，所以加上-m参数，把commit描述写进去。</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    合并后，我们用git log看看分支历史：</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    $ git log --graph --pretty=oneline --abbrev-commit</span></div><div><span style="font-size: 11pt;">    *   e1e9c68 (HEAD -&gt; master) merge with no-ff</span></div><div><span style="font-size: 11pt;">    |\  </span></div><div><span style="font-size: 11pt;">    | * f52c633 (dev) add merge</span></div><div><span style="font-size: 11pt;">    |/  </span></div><div><span style="font-size: 11pt;">    *   cf810e4 conflict fixed</span></div><div><span style="font-size: 11pt;">    ...</span></div><div><span style="font-size: 11pt;">    可以看到，不使用Fast forward模式，merge后就像这样：</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    git-no-ff-mode</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><span style="font-size: 11pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">分支策略</span></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    在实际开发中，我们应该按照几个基本原则进行分支管理：</span></div><div><span style="font-size: 11pt;">    首先，master分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面干活；</span></div><div><span style="font-size: 11pt;">    那在哪干活呢？干活都在dev分支上，也就是说，dev分支是不稳定的，到某个时候，比如1.0版本发布时，再把dev分支合并到master上，在master分支发布1.0版本；</span></div><div><span style="font-size: 11pt;">    你和你的小伙伴们每个人都在dev分支上干活，每个人都有自己的分支，时不时地往dev分支上合并就可以了。</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    Git分支十分强大，在团队开发中应该充分应用。</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    合并分支时，加上--no-ff参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而fast forward合并就看不出来曾经做过合并。</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    当手头工作没有完成时，先把工作现场git stash一下，然后去修复bug</span></div><div><span style="font-size: 11pt;">    修复bug时，我们会通过创建新的bug分支进行修复，然后合并，最后删除</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    git stash             <span>    </span>保存工作现场</span></div><div><span style="font-size: 11pt;">    git stash apply       恢复，但是恢复后，stash内容并不删除，你需要用git stash drop来删除；</span></div><div><span style="font-size: 11pt;">    git stash pop         恢复的同时把stash内容也删了，回到工作现场</span></div><div><span style="font-size: 11pt;">    git stash list        <span>  </span> 查看</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    开发一个新feature，最好新建一个分支</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    git branch -D 分支名     强行删除分支</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    多人协作的工作模式通常是这样：</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    首先，可以试图用git push origin &lt;branch-name&gt;推送自己的修改；</span></div><div><span style="font-size: 11pt;">    如果推送失败，则因为远程分支比你的本地更新，需要先用git pull试图合并；</span></div><div><span style="font-size: 11pt;">    如果合并有冲突，则解决冲突，并在本地提交；</span></div><div><span style="font-size: 11pt;">    没有冲突或者解决掉冲突后，再用git push origin &lt;branch-name&gt;推送就能成功！</span></div><div><span style="font-size: 11pt;">    如果git pull提示no tracking information，则说明本地分支和远程分支的链接关系没有创建，用命令git branch --set-upstream-to &lt;branch-name&gt; origin/&lt;branch-name&gt;。</span></div><div><span style="font-size: 11pt;">    这就是多人协作的工作模式，一旦熟悉了，就非常简单。</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 11pt; font-weight: bold;-evernote-highlight:true;">远程仓库</span></font></div><div><span style="font-size: 11pt;">    git remote -v         <span>    </span><span>    </span>查看远程库信息 本地新建的分支如果不推送到远程，对其他人就是不可见的</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    git push origin branch-name                 从本地推送分支</span></div><div><span style="font-size: 11pt;">    git pull                        <span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span>如果推送失败，先抓取远程的新提交</span></div><div><span style="font-size: 11pt;">    git checkout -b branch-name origin/branch-name  在本地创建和远程分支对应的分支，</span></div><div><span style="font-size: 11pt;">                           <span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>  </span>  本地和远程分支的名称最好一致</span></div><div><span style="font-size: 11pt;">    git branch --set-upstream branch-name origin/branch-name</span></div><div><span style="font-size: 11pt;">                           <span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span><span>    </span> 建立本地分支和远程分支的关联</span></div><div><span style="font-size: 11pt;">    git pull                                      <span>    </span><span>    </span><span>    </span>  从远程抓取分支，如果有冲突，要先处理冲突</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">rebase操作可以把本地未push的分叉提交历史整理成直线</span></div><div><span style="font-size: 11pt;">rebase的目的是使得我们在查看历史提交的变化时更容易，因为分叉的提交需要三方对比</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><span style="font-size: 11pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">创建标签</span></font></div><div><span style="font-size: 11pt;">    git tag &lt;tagname&gt;                 <span>     </span>用于新建一个标签，默认为HEAD，也可以指定一个commit id</span></div><div><span style="font-size: 11pt;">    git tag -a &lt;tagname&gt; -m &quot; &quot;       可以指定标签信息</span></div><div><span style="font-size: 11pt;">    git tag                           <span>    </span><span>    </span><span>    </span><span>  </span> 可以查看所有标签</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 11pt; font-weight: bold;-evernote-highlight:true;">操作标签</span></font></div><div><span style="font-size: 11pt;">    git push origin &lt;tagname&gt;               <span>    </span><span>     </span>可以推送一个本地标签</span></div><div><span style="font-size: 11pt;">    git push origin --tags                 <span>    </span><span>    <span>    </span><span>    </span></span>可以推送全部未推送过的本地标签</span></div><div><span style="font-size: 11pt;">    git tag -d &lt;tagname&gt;                  <span>     </span> <span>    </span><span>    </span>可以删除一个本地标签（先删本地）</span></div><div><span style="font-size: 11pt;">    git push origin :refs/tags/&lt;tagname&gt;   <span>    </span>可以删除一个远程标签</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 11pt;">    忽略特殊文件</span></div><div><span style="font-size: 11pt;">    </span><a href="https://github.com/github/gitignore" style="font-size: 11pt;">https://github.com/github/gitignore</a><span style="font-size: 11pt;">  各类配置文件</span></div><div><span style="font-size: 11pt;">    忽略某些文件时，需要编写.gitignore</span></div><div><span style="font-size: 11pt;">    .gitignore文件本身要放到版本库里，并且可以对.gitignore做版本管理</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><span style="font-size: 11pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">配置别名</span></font></div><div><span style="font-size: 11pt;">    git config --global alias.co checkout</span></div><div><span style="font-size: 11pt;">    git config --global alias.ci commit</span></div><div><span style="font-size: 11pt;">    git config --global alias.br branch</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><span style="font-size: 11pt; font-weight: bold; background-color: rgb(255, 250, 165);-evernote-highlight:true;">查看配置</span></font></div><div><span style="font-size: 11pt;">    cat .git/config             <span>    </span><span>    </span><span>    </span>当前仓库</span></div><div><span style="font-size: 11pt;">    cat .gitconfig              <span>    </span><span>    </span><span>    </span>当前用户（需要到用户主目录）</span></div><div><span style="font-size: 11pt;">    git config --global --list  <span>    </span><span>  </span> 查看用户的配置信息</span></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><br/></div></span>
</div></body></html> 